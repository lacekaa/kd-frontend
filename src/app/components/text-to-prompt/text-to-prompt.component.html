<div class="typing-area-container">
  <div class="instructions" *ngIf="!promptLocked">
    <div class="instructions1-headline">
      <strong>Instructions 1:</strong>
    </div>
    <br/>
    Type a text prompt in the box below that you consider might lead to the text output shown here. Once
    you finish your prompt, hit "Set Prompt". After that, you will not be able to adjust your prompt.
  </div>
  <div class="text1" *ngIf="!secondAttempt">
    Subject: Document Submission Reminder
    <br>
    Hello,
    This is a reminder that all documents for the Q3 report are due by Friday at noon. Please ensure they are uploaded to the shared folder.
    <br>
    <br>
  </div>
  <div class="text2" *ngIf="secondAttempt">
    A small turtle walked slowly along the riverbank. It paused to watch the leaves floating gently on the water.
    After a moment, it continued its walk, leaving tiny footprints in the soft mud.
    <br>
    <br>
  </div>
  <div class="instructions2" *ngIf="promptLocked">
    <div class="instructions2-headline">
      <strong>Instructions 2:</strong>
    </div>
    <br/>
    Now highlight at least one part of your prompt you consider important and hit "Important".
    If you consider some parts of your prompt unimportant, you can highlight them and hit "Unimportant". You must also at
    least highlight one part of your prompt as unimportant. You can
    highlight text with your mouse by clicking and dragging over the text.
    Once done, hit "Submit".

    Note: You can only highlight parts inside the prompt box above, the visualization box below is read-only.
  </div>

  <div class="input-section">
    <textarea
      #typingArea
      class="text-input"
      [disabled]="promptLocked"
      (keydown)="onKeyDown($event)"
      (keyup)="onKeyUp($event)"
      placeholder="Type your prompt here..."
    ></textarea>
    <div class="button-group">
      <button class="set-prompt-button" *ngIf="!promptLocked" (click)="lockPrompt()">Set Prompt</button>
      <button class="highlight-button" *ngIf="promptLocked" (click)="onTextSelection()">Confident</button>
      <button class="lowlight-button" *ngIf="promptLocked" (click)="onTextSelectionLow()">Unconfident</button>
      <button class="submit-button" *ngIf="highlightSet" (click)="finalizeSubmission()">Submit</button>
      <button class="reset-last-entry-button" *ngIf="promptLocked" (click)="resetLastEntry()">Remove last confident/unconfident</button>
    </div>
  </div>

  <div *ngIf="promptLocked" class="visualization-section">
    <h3>You can only highlight parts inside the prompt box above, this visualization box
      is read-only.</h3>
    <div class="highlight-display" [innerHTML]="getFormattedPrompt()"></div>
  </div>

  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
</div>
