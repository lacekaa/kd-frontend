<div class="typing-area-container">
  <div class="instructions">
    <p>
      <strong>Instructions:</strong>
      <br/>
      Type a text prompt in the box below as if you would interact with systems such as ChatGPT or other models. Once
      you finish your prompt, hit "Set Prompt". After that, you will not be able to adjust your prompt. Highlight at
      least one part of your prompt you consider most important and hit "Highlight". You can also highlight parts of
      your prompt you do not consider important by selecting them and hitting "Lowlight".
      Once done, hit "Submit".
      Note: You can only highlight parts inside the prompt box above, the visualization box is read-only.
    </p>
  </div>

  <div class="input-section">
    <textarea
      #typingArea
      class="text-input"
      [disabled]="promptLocked"
      (keydown)="onKeyDown($event)"
      (keyup)="onKeyUp($event)"
      placeholder="Type your prompt here..."
    ></textarea>
    <div class="button-group">
      <button class="set-prompt-button" *ngIf="!promptLocked" (click)="lockPrompt()">Set Prompt</button>
      <button class="highlight-button" [disabled]="!promptLocked" (click)="onTextSelection()">Highlight</button>
      <button class="lowlight-button" [disabled]="!promptLocked" (click)="onTextSelectionLow()">Lowlight</button>
      <button class="submit-button" (click)="finalizeSubmission()">Submit</button>
    </div>
  </div>

  <div *ngIf="promptLocked" class="visualization-section">
    <h3>Prompt Visualization:</h3>
    <div class="highlight-display" [innerHTML]="getFormattedPrompt()"></div>
  </div>

  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
</div>
